<!-- Search.html

The main search page for the site
Displays a search bar and result list down the left column
Below this there is a section of favorites and popular searches

The right column contains the results from clicking on a search
This "information panel" will be color-coded to match its result type
The info panel will contain different information based on the type of result chosen (tool/software, lab, guide)

By default, when the page loads the first result in the list will be opened in the info panel
If the results list is empty, display a message instead indicating that no results were obtained
-->

<link href="../Styles/hover-min.css" rel="stylesheet">
<link href="../Public/Styles/search.css" rel="stylesheet" />

<div>
    <!--LEFT COLUMN-->
    <div class="left-col">

        <form data-ng-submit="search()">
            <div class="bar">
                <input type="text" ng-model="searchInput" placeholder="Find your Tool" class="InputText"/>
            </div>
        </form>

        <div class="result-list">
            <div class="result-header">Search Results</div>
            <ul>
                <div class="result-list-labs">
                    <div class="result-list-lab-item"
                         data-ng-repeat="r in results_labs"
                         data-ng-click="select(r)">
												<img src="Images/lab.png" width="24" height="24"/>
                        <div class="result-list-item-title">{{r.title}}</div>
                    </div>
                </div>
                <div class="result-list-tools">
                    <div class="result-list-tool-item"
                         data-ng-repeat="r in results_tools"
                         data-ng-click="select(r)">
												<img src="Images/tool.png" width="24" height="24" />
                        <div class="result-list-item-title">{{r.title}}</div>
                    </div>
                </div>
                <div class="result-list-software">
                    <div class="result-list-software-item"
                         data-ng-repeat="r in results_software"
                         data-ng-click="select(r)">
												<img src="Images/software.png" width="24" height="24" />
                        <div class="result-list-item-title">{{r.title}}</div>
                    </div>
                </div>
                <div class="result-list-labs">
                    <div class="result-list-lab-item"
                         data-ng-repeat="r in results_guides"
                         data-ng-click="select(r)">
												<img src="Images/guide.png" width="24" height="24" />
                        <div class="result-list-item-title">{{r.title}}</div>
                    </div>
                </div>
            </ul>
        </div>

        <div class="popular-list">
            <div class="popular-header">Popular Searches</div>
            <ul>
                <li class="popular-item"
                    data-ng-repeat="p in popularSearches"
                    data-ng-click="searchFor(p)">
                    {{p}}
                </li>
            </ul>
        </div>

        <div class="favorite-list"
             data-ng-if="loggedIn()">
            <div class="favorite-header">Favorites</div>
            <ul>
                <li class="favorite-item"
                    data-ng-repeat="f in favorites"
                    data-ng-click="searchFor(f)">
                    {{f}}
                </li>
            </ul>
        </div>

    </div>

    <!--RIGHT COLUMN-->
    <div class="right-column">

        <!--LAB INFO PANEL-->
        <div class="info-panel info-panel-lab"
             data-ng-if="resultType(curSelectedResult) === types.LAB">
            <div class="info-panel-header">
								<img src="Images/lab.png" width="24" height="24" />
                <div class="info-panel-title">{{curSelectedResult.title}}</div>
								<div class="star"
										 data-ng-if="loggedIn()"
										 data-ng-click="toggleFavorite()">
									<img src="Images/star_hollow.png" width="24" height="24"
											 data-ng-if="curIsFavorite()" />
									<img src="Images/star_full.png" width="24" height="24"
											 data-ng-if="!curIsFavorite()" />
								</div>
            </div>
            <div class="info-panel-container">
                <div class="info-panel-map">
									<iframe src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d12203.756918782326!2d-88.2169016!3d40.12135775!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2sus!4v1449545834376" width="900" height="450" frameborder="0" style="border:0" allowfullscreen></iframe>
								</div>
            </div>
            <div class="info-panel-desc">{{curSelectedResult.location}}</div>

            <div class="info-panel-container">
                <div class="info-panel-subtitle">Labs</div>
                <div class="info-panel-lab-entry"
                     data-ng-repeat="labName in curSelectedResult.labs">
                    {{labName}}
                </div>
            </div>
            <div class="info-panel-container">
                <div class="info-panel-subtitle">Tools and Software</div>
                <div class="info-panel-tool-entry"
                     data-ng-repeat="toolName in curSelectedResult.tools"
                     data-ng-click="searchFor(toolName)">
                    {{toolName}}
                </div>
            </div>
            <div class="info-panel-container">
                <div class="info-panel-subtitle">Comments</div>
                <div class="info-panel-comment-submit">
                    <!--TODO: Comment Submission-->
                </div>
                <div class="info-panel-comment-list">
                    <div class="info-panel-comment-container"
                         data-ng-repeat="com in curSelectedResult.comments">
                        <div class="comment-user">{{com.user}}</div>
                        <div class="comment-rating">Rating: {{com.rating}}</div>
                        <div class="comment-body">{{com.body}}</div>
                    </div>
                </div>
            </div>
        </div>

        <!--Tool Info Panel-->
        <div class="info-panel info-panel-tool"
             data-ng-if="resultType(curSelectedResult) === types.TOOL">
            <div class="info-panel-header">
								<img src="Images/tool.png" width="24" height="24" />
                <div class="info-panel-title">{{curSelectedResult.title}}</div>
								<div class="star"
										 data-ng-if="loggedIn()"
										 data-ng-click="toggleFavorite()">
									<img src="Images/star_hollow.png" width="24" height="24"
											 data-ng-if="curIsFavorite()" />
									<img src="Images/star_full.png" width="24" height="24"
											 data-ng-if="!curIsFavorite()" />
								</div>
            </div>
            <div class="info-panel-desc">{{curSelectedResult.desc}}</div>
            <div class="info-panel-container">
                <!--TODO: Map-->
                <div class="info-panel-lab-list">
                    <!--TODO: Lab sorting DDL-->
                    <table class="info-panel-lab-table">
                        <thead>
                            <tr>
                                <td>Location</td>
                                <td>Sorting Category</td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-ng-repeat="loc in getSortedCurToolLocations()">
                                <td>
                                    {{loc.title}}
                                </td>
                                <td>
                                    {{loc.sortValueText}}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="info-panel-container">
                <div class="info-panel-subtitle">Guides</div>
                <div class="info-panel-guide-list">
                    <div class="info-panel-guide-entry"
                         data-ng-repeat="g in curSelectedResult.guides"
                         data-ng-click="searchFor(g)">
                        <div class="guide-title">{{g}}</div>
                        <!--TODO: Display guide ratings-->
                    </div>
                </div>
            </div>
        </div> 

        <!--Software Info Panel-->
        <div class="info-panel info-panel-software"
             data-ng-if="resultType(curSelectedResult) === types.SOFTWARE">
            <div class="info-panel-header">
								<img src="Images/software.png" width="24" height="24" />
                <div class="info-panel-title">{{curSelectedResult.title}}</div>
								<div class="star"
										 data-ng-if="loggedIn()"
										 data-ng-click="toggleFavorite()">
									<img src="Images/star_hollow.png" width="24" height="24"
											 data-ng-if="curIsFavorite()" />
									<img src="Images/star_full.png" width="24" height="24"
											 data-ng-if="!curIsFavorite()" />
								</div>
            </div>
            <div class="info-panel-desc">{{curSelectedResult.desc}}</div>
            <div class="info-panel-container">
                <!--TODO: Map-->
                <div class="info-panel-lab-list">
                    <!--TODO: Lab sorting DDL-->
                    <table class="info-panel-lab-table">
                        <thead>
                            <tr>
                                <td>Location</td>
                                <td>Sorting Category</td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-ng-repeat="loc in getSortedCurSofwareLocations()">
                                <td>
                                    {{loc.title}}
                                </td>
                                <td>
                                    {{loc.sortValueText}}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="info-panel-container">
                <div class="info-panel-subtitle">Guides</div>
                <div class="info-panel-guide-list">
                    <div class="info-panel-guide-entry"
                         data-ng-repeat="g in curSelectedResult.guides"
                         data-ng-click="searchFor(g)">
                        <div class="guide-title">{{g}}</div>
                        <!--TODO: Display guide ratings-->
                    </div>
                </div>
            </div>
        </div> 


        <!--Guide Info Panel-->
        <div class="info-panel info-panel-guide"
             data-ng-if="resultType(curSelectedResult) === types.GUIDE">
            <div class="info-panel-header">
								<img src="Images/guide.png" width="24" height="24" />
                <div class="info-panel-title">{{curSelectedResult.title}}</div>
                <div class="star"
										 data-ng-if="loggedIn()"
										 data-ng-click="toggleFavorite()">
									<img src="Images/star_hollow.png" width="24" height="24" 
											 data-ng-if="curIsFavorite()"/>
									<img src="Images/star_full.png" width="24" height="24"
											 data-ng-if="!curIsFavorite()" />
								</div>
            </div>
            <div class="info-panel-desc">Submitted by {{curSelectedResult.submitUser}} on {{curSelectedResult.submitDate.toDateString()}}</div>
            <div class="info-panel-guide-link-container">
                <a>URL: </a>
                <a class="guide-url"
                   data-ng-href="{{curSelectedResult.url}}">{{curSelectedResult.url}}</a>
            </div>
            <div class="info-panel-container">
                <div class="info-panel-subtitle">Comments</div>
                <div class="info-panel-comment-submit">
                    <!--TODO: Comment Submission-->
                </div>
                <div class="info-panel-comment-list">
                    <div class="info-panel-comment-container"
                         data-ng-repeat="com in curSelectedResult.comments">
                        <div class="comment-user">{{com.user}}</div>
                        <div class="comment-rating">Rating: {{com.rating}}</div>
                        <div class="comment-body">{{com.body}}</div>
                    </div>
                </div>
            </div>
        </div> 

    </div>
</div>
